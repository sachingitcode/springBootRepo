<v-app id="appli3">
    <div data-th-replace="fragments/text-field :: formHeader()"></div>
    <v-form ref="form" v-model="valid" lazy-validation>
        <v-container grid-list-md style="padding:10px 10px 10px 10px;">
            <v-layout> 
                <v-flex  xs12 sm12 md12 lg12 xl12 class="text-xs-center pt-3">
                    <h1>INSTITUTE OF HOME ECONOMICS</h1>
                    <label>(UNIVERSITY OF DELHI)</label>
                </v-flex>
            </v-layout>
            <div data-th-replace="fragments/text-field :: input6(label='Delhi University Enrolment No',model='userData.delhi_no',placeholder='',counter='',rules='[rules.required,rules.number,rules.length]')"></div>

            <v-flex xs12 sm12 md12 lg12 xl12 class="text-xs-center pt-3">
                <h3><u>APPLICATION FORM FOR ADMISSION TO
                    </u>           
                </h3>
                <h5>MSc Food & Nutrition</h5>

            </v-flex>

            <div data-th-replace="fragments/text-field :: input6(label='Name(in capital letter)',model='userData.name',placeholder='',counter='10',rules='[rules.required,rules.length]')"></div>

            <v-layout row wrap>

                <v-flex xs12 sm12 md6 lg6 xl6>
                    <v-menu
                        v-model="menu9"
                        :close-on-content-click="false"
                        :nudge-right="40"
                        lazy
                        transition="scale-transition"
                        offset-y
                        full-width
                        min-width="290px"
                        >
                        <template v-slot:activator="{ on }">
                            <v-text-field
                                v-model="userData.Dob"
                                label="Date of Birth"
                                hint="(post holding at present)"
                                prepend-icon="mdi-calendar-today"
                                readonly
                                v-on="on"
                                ></v-text-field>
                        </template>
                        <v-date-picker v-model="userData.Dob" @input="menu9 = false"></v-date-picker>
                    </v-menu>              
                    <v-spacer></v-spacer>
                </v-flex>
                <div data-th-replace="fragments/text-field :: input6(label='Mobile No',model='userData.mobile',placeholder='',counter='10',rules='[rules.required,rules.number,rules.lengthp]')"></div>



            </v-layout>
            <v-layout row wrap>

                <div data-th-replace="fragments/text-field :: input6(label='Nationality',model='userData.natio',placeholder='',counter='20',rules='[rules.required,rules.lengthp]')"></div>
                <!----                <v-flex xs12 sm12 md6 lg6 xl6>-->
                <!--                    <v-text-field v-model="userData.natio" :counter="20" :rules="[rules.required,rules.lengthp]" label="Nationality" required></v-text-field>-->
                <div data-th-replace="fragments/text-field :: input6(label='E-mail ID',model='userData.email1',placeholder='',counter='20',rules='[rules.required,rules.email]')"></div>

            </v-layout>
            <v-layout row wrap>
                <div data-th-replace="fragments/text-field :: input6(label='Father /Guardians Name',model='userData.fath',placeholder='',counter='50',rules='[rules.required,rules.length]')"></div>
                <v-flex center xs12 sm12 md6 lg6 xl6>    
                    <v-select   
                        :items="fatho"
                        item-text='fath_occ'
                        item-value='pk'
                        label='Occupation'
                        v-model="userData.occupation" 
                        ></v-select>
                </v-flex>
            </v-layout>
            <v-layout>

                <div data-th-replace="fragments/text-field :: input6(label='Mobile No',model='userData.mobile2',placeholder='',counter='10',rules='[rules.required,rules.length]')"></div>
                <div data-th-replace="fragments/text-field :: input4(label='E-mail ID',model='userData.email2',placeholder='',counter='',rules='[rules.required,rules.email]')"></div>

            </v-layout>
            <v-layout>
                <div data-th-replace="fragments/text-field :: input6(label='Mothers Name',model='userData.name1',placeholder='',counter='',rules='[rules.required,rules.length]')"></div>
                <v-flex center xs12 sm12 md6 lg6 xl6>    
                    <v-select   
                        :items="motho"
                        item-text='moth_occ'
                        item-value='pk'
                        label='Occupation'
                        v-model="userData.occupation1" 
                        ></v-select>
                </v-flex>
            </v-layout>

            <div data-th-replace="fragments/text-field :: input12(label='Present Address',model='userData.pre_add',placeholder='',counter='',rules='[rules.required,rules.length]')"></div>


            <v-layout>
                <div data-th-replace="fragments/text-field :: input6(label='Telephone Number Resi/Mobile No',model='userData.tel_Mo',placeholder='',counter='',rules='[rules.required,rules.number,rules.lengthp]')"></div>
                <div data-th-replace="fragments/text-field :: input6(label='Office',model='userData.office',placeholder='',counter='10',rules='[rules.required,rules.lengthp]')"></div>

            </v-layout>
            <div data-th-replace="fragments/text-field :: input12(label='Permanent Address',model='userData.per_add',placeholder='',counter='',rules='[rules.required,rules.length]')"></div>
            <div data-th-replace="fragments/text-field :: input12(label='Telephone Number',model='userData.tel_no',placeholder='',counter='',rules='[rules.required,rules.length,rules.number]')"></div> 

            <v-layout>
                <div data-th-replace="fragments/text-field :: input6(label='College last attendedd with dates',model='userData.col_year',placeholder='YYYY',counter='',rules='[rules.yearr,rules.yeard,rules.yeari,rules.number]')"></div> 
                <div data-th-replace="fragments/text-field :: input6(label='University',model='userData.univ_sity',placeholder='',counter='',rules='[rules.required,rules.length,rules.number]')"></div> 

            </v-layout>
            <v-layout>
                <v-flex xs12 sm6 md6>
                    <br>
                    <h6>Do you belong to SC/ST/OBC/PWD</h6>
                    <label>(if Yes,attach cetificate from competant authority)</label>
                </v-flex>

                <v-flex xs12 sm6 md6>
                    <v-radio-group v-model="userData.row" row>

                        <v-radio label="Yes" value="radio-1"></v-radio>
                        <v-radio label="No" value="radio-2"></v-radio>

                    </v-radio-group>
                </v-flex>   
            </v-layout>
            <br>
            <br>
            <h3>EDUCATIONAL QUALIFICATIONS</h3>

            <v-flex xs12 sm12 md12 lg12 xl12>
                <v-card>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th rowspan="3" > Examination Passed</th>
                                <th rowspan="3">Stream</th>
                                <th rowspan="3">Name of the Board/University</th>
                                <th rowspan="3">Year of Exam</th>
                                <th rowspan="3">Roll No</th> 
                                <th colspan="3">Aggregated of Marks</th> 

                            </tr>
                            <tr>
                                <th>\Max. Marks</th>
                                <th>Marks Obtained</th>
                                <th>Percentage</th>


                            </tr>
                        </thead>
                        <tbody>

                            <tr>
                                <td>
                        <v-flex center xs12 sm12 md69 lg9 xl6>
                            <h4>Senior Secondary/
                                Equivalent examination</h4>
                        </v-flex>
                        </td>

                        <td> <v-flex center xs12 sm12 md9 lg9 xl6>
                            <v-select   
                                :items="schools"
                                item-text='name_sstream'
                                item-value='pk'
                                label=''
                                v-model="userData.stream_a" 


                                ></v-select>
                        </v-flex>
                        </td>
                        <td> <v-flex center xs12 sm12 md9 lg9 xl6>
                            <v-select   
                                :items="countryData"
                                item-text='board_name'
                                item-value='pk'
                                label=''
                                v-model="userData.nme_boara" 


                                ></v-select>
                        </v-flex>
                        </td>

                        <td>    <v-flex xs12 sm12 md9 lg9 xl6>
                            <v-text-field  placeholder="YYYY" :counter="4" v-model="userData.year_a" :rules="[rules.yearr,rules.yeard,rules.yeari,rules.number]"  required></v-text-field>
                        </v-flex>

                        </td>
                        <td> <v-text-field placeholder=" " v-model="userData.rollno_a" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <v-text-field placeholder=" " @blur="maxmarksa"  v-model="userData.maxmarks_a" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <v-text-field placeholder=" "  @blur="obtmarksa" v-model="userData.marksobt_a" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <br>   
                            <label >{{ userData.perca }}</label> </td>
                        </tr>    
                        <tr>
                            <td>
                        <v-flex center xs12 sm12 md69 lg9 xl6>
                            <v-select   
                                :items="course"
                                item-text='name_coursea'
                                item-value='pk'
                                label=''
                                v-model="userData.exm_pas" 
                                ></v-select>
                        </v-flex>
                        </td>

                        <td> <v-flex center xs12 sm12 md9 lg9 xl6>
                            <v-select   
                                :items="stream"
                                item-text='name_stream'
                                item-value='pk'
                                label=''
                                v-model="userData.stream_b" 
                                ></v-select>
                        </v-flex>
                        </td>
                        <td> <v-flex center xs12 sm12 md9 lg9 xl6>
                            <v-select   
                                :items="countryDataa"
                                item-text='university_name'
                                item-value='pk'
                                label=''
                                v-model="userData.nme_boarb" 
                                ></v-select>
                        </v-flex>
                        </td>

                        <td>    <v-flex xs12 sm12 md9 lg9 xl6>
                            <v-text-field  placeholder="YYYY" :counter="4" v-model="userData.year_b" :rules="[rules.yearr,rules.yeard,rules.yeari,rules.number]"  required></v-text-field>
                        </v-flex>

                        </td>
                        <td> <v-text-field placeholder=" " v-model="userData.rollno_b" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <v-text-field placeholder=" " @blur="maxmarksb" v-model="userData.maxmarks_b" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <v-text-field placeholder=" " @blur="obtmarksb" v-model="userData.marksobt_b" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <br>   
                            <label >{{userData.percb}}</label> </td>
                        </tr>
                        <tr>
                            <td>
                        <v-text-field placeholder="Any Other Exam " v-model="userData.exm_pasa" :rules="[rules.required]"></v-text-field></td>


                        <td> <v-flex center xs12 sm12 md9 lg9 xl6>
                            <v-select   
                                :items="stream"
                                item-text='name_stream'
                                item-value='pk'
                                label=''
                                v-model="userData.stream_c" 
                                ></v-select>
                        </v-flex>
                        </td>
                        <td> <v-flex center xs12 sm12 md9 lg9 xl6>
                            <v-select   
                                :items="countryDataa"
                                item-text='university_name'
                                item-value='pk'
                                label=''
                                v-model="userData.nme_boarc" 
                                ></v-select>
                        </v-flex>
                        </td>

                        <td>    <v-flex xs12 sm12 md9 lg9 xl6>
                            <v-text-field  placeholder="YYYY" :counter="4" v-model="userData.year_c" :rules="[rules.yearr,rules.yeard,rules.yeari,rules.number]"  required></v-text-field>
                        </v-flex>

                        </td>
                        <td> <v-text-field placeholder=" " v-model="userData.rollno_c" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <v-text-field placeholder=" " @blur="maxmarksc" v-model="userData.maxmarks_c" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <v-text-field placeholder=" " @blur="obtmarksc" v-model="userData.marksobt_c" :rules="[rules.required,rules.number]"></v-text-field></td>
                        <td> <br>   
                            <label>{{userData.percc}}</label> </td>
                        </tr>
                        </tbody>
                    </table>

                </v-card>
            </v-flex>



            <div th:replace="fragments/formelements.html :: footerbuttons()"></div>
        </v-container>
    </v-form>
</v-app>
<script th:inline="javascript">
    var myObject = new Vue({
        el: "#appli3",
        vuetify: new Vuetify(),
        data: {
            select: null,
            loading: false,
            valid: true,
            menu9: false,
            title: /*[[${session.title}]]*/ '',
            countryData: [],
            countryDataa: [],
            fatho: [],
            motho: [],
            schools: [],
            course: [],
            stream: [],
            userData: {
                row: '',
                school: '',
                delhi_no: '',
                radios: '',
                Dob: '',
                mobile: '',
                email: '',
                age: '',
                mont: '',
                days: '',
                mobile: '',
                name: '',
                mobile1: '',
                fath: '',
                occupation: '',
                mobile2: '',
                email1: "",
                occupation1: "",
                natio: "",
                pre_add: "",
                office: "",
                tel_Mo: '',
                tel_no: '',
                col_year: '',
                univ_sity: '',
                year_ofpass: '',
                roll_no: '',
                date_ofaward: '',
                cgpa: '',
                total_mark: '',
                nme_boara: '',
                year_a: '',
                rollno_a: '',
                maxmarks_a: '',
                marksobt_a: '',
                perca: '',
                nme_boarb: '',
                year_b: '',
                rollno_b: '',
                maxmarks_b: '',
                marksobt_b: '',
                percb: '',

            },
            rules: {
                required: v => !!v || 'Field is required',
                between: v => (v && v.length <= 50 && v.length >= 10) || 'Length must be between 10-50 characters',
                length: v => (v && v.length <= 50) || 'Name must be less than 50 characters',
                number: v => /^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/.test(v) || 'Only Numbers',
                yeari: v => /^(19|20)\d{2}$/.test(v) || 'Invalid Year',
                yearr: v => !!v || 'Year is required',
                yeard: v => (v && v.length === 4) || 'Year must be 4 digits',
                email: v => /^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(v) || 'E-mail must be valid',
                lengthp: v => (v && v.length <= 10) || 'Number must be 10 digits'
            },
        },
        methods: {

            CloseForm() {
                CloseForm()
//                $("#formcontainer").css("display", "none");
//                $("#formContent").html("");
//                $("#contentarea").css("display", "");
            },
            maxmarksa() {


                var marks = this.userData.maxmarks_a;

                if (marks != '') {
                    if (marks > 1000) {
                        alert("Sorry....................");
                        this.userData.maxmarks_a = '';
                    }
                }
            },
            obtmarksa() {

                var obtmarks = this.userData.marksobt_a;
                var maxmarks = this.userData.maxmarks_a;

                if (obtmarks != '') {
                    if (obtmarks > maxmarks) {
                        alert("Sorry....................");
                        this.userData.marksobt_a = '';
                    } else {
                        this.perca();
                    }
                }
            },
            perca() {
                var maxmark = this.userData.maxmarks_a;
                var markobt = this.userData.marksobt_a;

                var perca = (markobt / maxmark * 100).toFixed(2);
                this.userData.perca = perca;
//alert("ds"+perca);
//alert("we"+this.userData.perca);


            },
            maxmarksb() {


                var marks = this.userData.maxmarks_b;

                if (marks != '') {
                    if (marks > 1000) {
                        alert("Sorry....................");
                        this.userData.maxmarks_b = '';
                    }
                }
            },
            obtmarksb() {

                var obtmarks = this.userData.marksobt_b;
                var maxmarks = this.userData.maxmarks_b;

                if (obtmarks != '') {
                    if (obtmarks > maxmarks) {
                        alert("Sorry....................");
                        this.userData.marksobt_b = '';
                    } else {
                        this.percb();
                    }
                }
            },
            percb() {
                var maxmark = this.userData.maxmarks_b;
                var markobt = this.userData.marksobt_b;

                var percb = (markobt / maxmark * 100).toFixed(2);
                this.userData.percb = percb;


            },
            maxmarksc() {


                var marks = this.userData.maxmarks_c;

                if (marks != '') {
                    if (marks > 1000) {
                        alert("Sorry....................");
                        this.userData.maxmarks_c = '';
                    }
                }
            },
            obtmarksc() {


                var obtmarks = this.userData.marksobt_c;
                var maxmarks = this.userData.maxmarks_c;

                if (obtmarks != '') {
                    if (obtmarks > maxmarks) {
                        alert("Sorry....................");
                        this.userData.marksobt_c = '';
                    } else {
                        this.percc();
                    }
                }

            },
            percc() {
                var maxmark = this.userData.maxmarks_c;
                var markobt = this.userData.marksobt_c;

                var percc = (markobt / maxmark * 100).toFixed(2);
                this.userData.percc = percc;


            },
            addRow() {
                this.userData.ref_course.push({
                    sub_name: '',
                    max_marks: '',
                    marks_obtai: '',
                    perc: '',
                })
            },
            deleteRow() {
                var myData = this.userData.ref_course;
                if (myData.length > 1) {
                    this.userData.ref_course.splice(-1, 1)
                }
            },
            checkData() {
                var message = '[[${next}]]';
                console.log('data==>>' + this.nextId);
                console.log('data==>>' + this.prevId);
            },
            validate() {
                if (this.$refs.form.validate()) {
                    this.snackbar = true
                }
            },
            saveasDraft() {
//                var tid = removeQuot(this.tid);
//                var currentId = removeQuot(this.currentId);
//                var nextId = removeQuot(this.nextId);
//
//                axios.post('/saveData',
//                        {
//                            "id": currentId,
//                            "savedId": this.id,
//                            "userData": this.userData,
//                            "tid": tid
//                        })
//
//                        .then(response => {
//                            //                            alert("Response==>>" + response);
//                            //                            alert(nextId);
//                            if (nextId !== null) {
//                                loadForm("707902c6-4a21-11e9-aaf4-8c89a53bcce4", tid);
//                            }
//                        })
//                        .catch(e => {
//                            alert("Error");
//                        })
            },
            reset() {
                this.$refs.form.reset()
            },
            NextSubmit() {
                axios.post('/saveData',
                        {
                            "id": this.id,
                            "userData": this.userData
                        })
                        .then(response => {
//                            if (response.data === true) {
                            LoadForm(response.data);
//                            }
                        })
                        .catch(e => {
                            alert("Error");
                        })
            },
            PreviousSubmit() {
                LoadPrevForm();
            },
            Submit() {
                axios.post('/saveData', this.userData)
                        .then(response => {
                            if (response.data === true) {
                                ListPages(/*[[${session.listPages}]]*/);
                            }
                        })
                        .catch(e => {
                            alert("Error");
                        })
            }
        },
        created() {
            axios.get('/findById')
                    .then(response => {
                        if (response.data != "")
                        {
                            this.userData = response.data.dt;
                            this.id = response.data.id;
                        }
                    })
                    .catch(e => {
                        alert("Error" + e);
                    })
        }


//            axios.get('/boardListing')
//                    .then(response => {
//                        if (response.data != '') {
////                            alert("sadsad" + response.data);
//                            this.countryData = response.data;
//                        }
//                    })
//                    .catch(e => {
//                        alert("Error" + e);
//                    })
//            axios.get('/universityListing')
//                    .then(response => {
//                        if (response.data != '') {
////                            alert("sadsad" + response.data);
//                            this.countryDataa = response.data;
//                        }
//                    })
//                    .catch(e => {
//                        alert("Error" + e);
//                    })
//            axios.get('/streamListing')
//                    .then(response => {
//                        if (response.data != '') {
////                            alert("sadsad" + response.data);
//                            this.stream = response.data;
//                        }
//                    })
//                    .catch(e => {
//                        alert("Error" + e);
//                    })
//            axios.get('/coursList')
//                    .then(response => {
//                        if (response.data != '') {
////                            alert("sadsad" + response.data);
//                            this.course = response.data;
//                        }
//                    })
//                    .catch(e => {
//                        alert("Error" + e);
//                    })
//            axios.get('/schoolcList')
//                    .then(response => {
//                        if (response.data != '') {
////                            alert("sadsad" + response.data);
//                            this.schools = response.data;
//                        }
//                    })
//                    .catch(e => {
//                        alert("Error" + e);
//                    })
//            axios.get('/fathList')
//                    .then(response => {
//                        if (response.data != '') {
//                            this.fatho = response.data;
//                        }
//                    })
//                    .catch(e => {
//                        alert("Error" + e);
//                    })
//            axios.get('/mothList')
//                    .then(response => {
//                        if (response.data != '') {
//                            this.motho = response.data;
//                        }
//                    })
//                    .catch(e => {
//                        alert("Error" + e);
//                    })
//        }
    })
</script>
